# Robotics Picture Validation

Based on https://docs.microsoft.com/en-us/azure/developer/javascript/how-to/with-web-app/azure-function-file-upload

## Configuration

The `local.settings.json` file needs te be created in the root of this repository. At this point you can copy the contents of `local.settings.example.json` and you're almost good to go. Make sure both `COGNITIVE_API_URL` and `COGNITIVE_API_KEY` are set correctly.

## Local development

`yarn install` -> install all packages

`yarn start-azurite` -> start local storage account

`yarn start` -> start function locally

### Example upload

```sh
curl --location --request POST 'http://localhost:7071/api/robotics-picture-validation?robotName=robot1' \
--header 'Content-Type: image/jpeg' \
--data-raw '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
'
```

## Production

Please make sure to use the correct `<CODE>` and content-type. Image content (--data-raw) should be in Base64 format and max 6MB in size.

```sh
curl --location --request POST 'https://fa-robotics-johnny-5.azurewebsites.net/api/robotics-picture-validation?code=<CODE>&robotName=robot1' \
--header 'content-type: image/jpeg' \
--data-raw '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
'
```
